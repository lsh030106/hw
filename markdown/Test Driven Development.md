# Test Driven Development

> 테스트 주도 개발



* 구체적인 행동 레벨에서의 TDD 의 개념 
  * **테스트 먼저 만들고 테스트를 통과하기 위한 것을 짜는 것**
  * 만드는 과정에서 우선 테스트를 작성하고 그걸 통과하는 코드를 만들기를 반복하며 제대로 동작하는 지에 대한 피드백을 적극적으로 받는 것

코딩을 다 끝내고 테스트 -> **이 순서를 바꾸는 것이 TDD를 적용하는 것**



* 적용 예시

  * 생년월일(input) 을 입력받으면 현재 나이(output)를 출력하는 프로그램

  1. 처음에는 간단한 것으로 목표를 정한다. (태어난 해와 올해의 연도를 입력)
     * 2015, 2018를 입력하면 (만)3살이 나오는 프로그램을 만들겠다는 생각을 한다.
  2. 만들기 전, 테스트를 설계한다.
     + 2015, 2018를 입력하면 2가 나오는 테스트 프로그램(장차 만들 프로그램을 테스트할 코드) 를 만든다.
  3. 그 다음에 그 테스트를 통과할 프로그램(1. 을 목표로 작성한 코드) 를 만든다.
     + 올해의 연도 - 태어난 해
     + 2018 - 2015
  4. 테스트 프로그램으로 이 3.에서 작성한 코드를 실행한다.
  5. 통과했으면 새로운 테스트를 추가한다.
     + 이번에는 생월을 추가했을 때 계산하는 프로그램
  6. 위와 같은 작업을 반복해 수행한다.



* **추상적인 레벨에서의 TDD의 핵심 개념**

> 결정과 피드백 사이의 갭에 대한 인식, 더 나아가 결정과 피드백 사이의 갭을 조절하기 위한 테크닉이라고도 할 수 있다.



+ Kent back

  + TDD란?

    a. 결정과 피드백 사이의 갭에 대한 인식

    b. 결정과 피드백 사이의 갭을 조절하기 위한 테크닉 

  + TDD는 프로그래밍 기법이나 기술적인 느낌보다는 심리적인 것으로 볼 수 있다.

+ 결정(decision)?

  + 프로그래밍을 하다보면 '이 방법으로 해야지', '이 부분을 이걸 이용해서 짜야지' 라는 것을 결정한다.

+ 피드백(feedback)?

  + 프로그래밍을 하다보면 성공/실패(에러)라는 피드백을 받는다.

+ 이 둘 (결정과 피드백) 사이에 갭이 생긴다.

  + 갭이 커질수록 문제

  + 내가 그 갭을 모르면 더 큰 문제

  + 위의 예와 함께 설명하면

    + 결정 1.을 목표로 코드를 작성할 때, '나는 빼기로 나이를 구해야겠다.' 라는 것을 결정한다.
    + 피드백: 빼기로 계산했을 때의 코드를 테스트 프로그램을 실행한 결과로, 된다/안된다 라는 프로그램 상의 피드백을 받는다.
    + 이 둘 사이의 갭을 내가 인식한다면 TDD를 하고 있는 것.

    

**TDD 의 효과** 

> 불확실성이 높을 떄 '피드백'과 '협력' 이 중요하다.

* 피드백과 협력이 중요한 이유
  * 불확실성이 높을 떄 '피드백'과 '협력'을 이용하면 더 좋은 결과가 나올 확률이 높아진다.
  * TDD도 마찬가지로 '피드백' 과 '협력'을 증진시키는 것이기 때문에 불확실성이 높을 때 도움이 되는 것



**TDD를 해야하는 상황**

+ 만약 어떤 부분에 대한 코딩을 여러번 해봤고 결과가 어떻게 나올 지 뻔하다면 TDD를 하지 않아도 된다.
+ TDD를 했을 때 얻는 것이 적다면 TDD를 하지 않아도 된다.
+ TDD는 아래와 같은 경우에 진행한다.
  1. 처음해보는 프로그램 주제
     + 나에 대한 불확실성이 높은 경우
  2. 고객의 요구조건이 바뀔 수 있는 프로젝트
     + 외부적인 불확실성이 높은 경우
  3. 개발하는 중에 코드를 많이 바꿔야 된다고 생각하는 경우
  4. 내가 개발하고 나서 이 코드를 누가 유지보수할지 모르는 경우
+ **즉, 불확실성이 높을 때 TDD를 하면 된다.**



**TDD의 효과**

> 모든 애자일의 실천법은 피드백과 협력을 동싱에 증진시킨다.



1. 피드백

   + TDD를 하면 피드백이 증가한다

     + 테스트를 통과하는 것으로 잘되고 있는가를 자주 확인 할 수 있다.
     + 이 부분은 사람들이 쉽게 느낄 수 있다.

   + **협력**

     + 켄트 백(Kent Beck)

       + 'test' 는 일반적으로 동사로 사용한다. '테스트 한다.', '테스트해라.'
       + 예를 들어, 누가 나한테 생년월일(input)을 입력받으면 현재 나이(output)를 출력하는 프로그램을 주고  test해보라고 한다면 내가 할 수 있는 것은 숫자를 여러 개 찍어보는 것이다.
         + 태어난 시간과 지금 시간이 같으면 O
         + 태어난 시간이 더 미래의 시간이면 '출생 전'
         + 등등
       + 그러나 TDD를 하면 'test'는 **명사가 된다.**

     + 'test'가 명사가 되면?

       + 동사는 그 순간에만 하는 것이고, 명사(대상, 목적어)는 이후에도 소유할 수 가 있음, 기록으로 남을 수 있는 것
       + 'test' 가 저장된다는 것은 남들에게 테스트 코드를 보여줄 수가 있고, 남들은 그 코드를 직접 실행해볼 수 있다는 것

     + TDD가 왜 협력을 증진시키는 지?

       + 'test' 가 명사(대상, 목적어) 가 디는 순간 이것을 공유하기가 쉬워진다.

       + 공유하면 협력이 증진된다.

         a. 남이 짠 코드를 빨리 이해할 수 있다.

         b. 남이 짠 코들르 쉽게 이해할 수 있다

         c. 용기가 생긴다. (자동화 된 테스트로 큰 걱정없이 코드를 수정 할 수 있다.)

     + 왜 이렇게 짰을까 궁금할 떄 'test'를 공유하고 그 테스트 코드를 보면 이해할 수 있다.

     + 테스트 코드에는 개발자의 개발과정 (어떤 고민/ 어떤 의사결정)이 나와있기 때문

     + 앞의 TDD의 정의(결정(decision)과 피드백(feedback) 사이의 갭을 인식하는 것)와 같이 테스트 코드(feedback)를 보면 그 사람의 의사결정(decision)이 나타나고 상대방은 그 부분은 왜 그렇게 짰는 지를 쉽고 빨리 알게 되기 때문에 협력이 증진된다.



**TDD의 장단점**

> 피드백과 협력을 증진시키기 때문에 불확실성에 대해 대비를 하게 해준다.

+ 개발속도가 느려진다고 생각하는 사람이 많기 때문에 사람들은 TDD에 대해 반신반의 한다

  + 처음부터 2개의 코드를 짜야한다.
  + 중간중간 테스트를 하면서 고쳐나가야 한다.

+ TDD의 장단점

  + 연구 논문 결론 취합

  1. TDD를 하면 개발 시간이 늘어난다.
     + 개발 시간의 정의?
       + 본인이 '다했다고' 생각 할 때까지, 기능 구현이 끝났을 때까지
     + 개발 시간이 TDD를 하지 않을 때에 비해 대략 10~30 %가 늘어난다.
  2. TDD를 하면 결함이 줄어든다.
     + 결함이 1/2~ 1/10 까지 줄어든다.
     + SW를 개발하면서 예상하지 못했던 시간을 많이 소요하는 것은 대부분이 버그 때문
     + TDD를 하면 이런 버그를 줄일 수 있다.
  3. TDD를 하면 코드 복잡도가 떨어진다.
     + 엔트로피(Entropie) 가 낮아진다.
     + 깨끗한 코드가 나온다.
     + 유지보수 비용이 낮아진다.