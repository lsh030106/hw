# C++ 가상함수 역학

> Dynamic binding 이 끼치는 성능의 악영향

**class x** 가 virtual function 을 포함하고 있거나 포함하는 클래스로부터 파생되었다면, 컴파일러는 class x를 위한 **virtual table** (vtbl) 을 생성한다. 



#### 가상함수테이블(vtbl) 과 가상테이블포인터(vptr) 의 성능 연관

* vtbl 은 특정 클래스가 정의한 모든 가상 함수들에 대한 포인터를 가짐 

* 클래스마다 하나의 테이블이 있으며 이 클래스의 각 객체는 vtbl에 대한 숨겨진 포인터를 포함함

  > 컴파일러만이 객체 내에서 vptr의 옵셋을 알고 있기 때문

* 따라서 컴파일러는 vptr을 적절히 초기화하기 위한 코드를 객체 생성자에 추가함



##### 가상함수의 성능상 부하

* vptr이 생성자에서 초기화되어야 함
* 가상 함수는 포인터 간접 참조를 통해 호출

